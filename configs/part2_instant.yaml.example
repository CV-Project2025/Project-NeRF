# Instant-NeRF 配置 - 加速 Part 2

mode: part2_instant

# ============================================
# Instant-NGP 哈希编码配置
# ============================================
n_levels: 16 # 分辨率层级数（16层多分辨率）
n_features_per_level: 2 # 每层特征数
log2_hashmap_size: 19 # 哈希表大小 2^19 = 512K
base_resolution: 16 # 最粗分辨率 16³
per_level_scale: 1.5 # 每层分辨率增长系数
scene_bound: 1.5 # 场景边界 [-1.5, 1.5] 适配 NeRF Synthetic

# 方向编码（仍用 Fourier）
L_embed_dir: 4

# ============================================
# 网络结构配置
# ============================================
hidden_dim: 64 # 隐藏层维度（可以小一点）

# ============================================
# 占据网格配置（空域跳跃加速）
# ============================================
use_density_grid: true # 启用占据网格
grid_resolution: 128 # 网格分辨率 128³
grid_threshold: 0.12 # 密度阈值（过滤低密度区域）
grid_update_interval: 16 # 每 16 步更新一次
grid_warmup_iters: 256 # 前 256 步冻结网格，让模型先学习

# ============================================
# 渲染配置
# ============================================
n_samples: 128 # 采样点数
render_n_samples: 128 # 渲染时采样点数
near: 2.0 # 近平面
far: 6.0 # 远平面
white_bkgd: true # 白色背景
scene_scale: 1.0 # 场景缩放

# ============================================
# 训练配置
# ============================================
train_iters: 2000 # 训练步数
learning_rate: 0.01 # 学习率（别太大，不然会遭遇 NaN 崩溃）
batch_size: 16384 # 批量大小
log_every: 50 # 日志间隔
save_every: 500 # 保存间隔

# ============================================
# 数据配置
# ============================================
downscale: 2 # 图像下采样

# ============================================
# 输出配置
# ============================================
log_dir: output/part2_instant
chunk: 200000 # 渲染块大小（一次处理整张图）
val_every: 500 # 验证集评估间隔

